<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset=utf-8/>
    <title>GM-Florida</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>

    <!--Scripts-->
    <script src='./scripts/stateData.js'></script>
    <script src='./scripts/FL.js'></script>
    <script src='./scripts/FLp.js'></script>
    <script src='./scripts/leaflet.ajax.min.js'></script>
    <script src='./scripts/functions.js'></script>

    <script src="https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>


    <!--Links-->
    <link href='https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.css' rel='stylesheet'/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="Content/Site.css">
    
</head>
<body>

<!--Navbar-->
<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand my-navbar-brand"> GerryMender Florida </a>
        </div>
        <a class="text-white navbar-brand toggle-btn" data-toggle="tooltip" data-placement="bottom"
           title="open/close function menu" onclick="toggleSlider()">Menu <span
                class="glyphicon glyphicon-align-justify"></span></a>
        <a class="text-white navbar-brand" data-toggle="tooltip" data-placement="bottom" title="return back to homepage"
           href="Homepage.html" style = "float: right">Back</a>
    </div>
</nav>

<!--Map Container-->
<div id="map-container">
    <!--Sliding Menu-->
    <div class = "slide-menu" id="slide-menu">
<!--Tabs-->
<div class="tab">
        <button class="tablinks" id = "firstshow" onclick="openTab(event, 'Help')">Help!</button>
        <button class="tablinks" onclick="openTab(event, 'Data')" >Data</button>
        <button class="tablinks" onclick="openTab(event, 'Bloc')">Bloc?</button>
        <button class="tablinks" onclick="openTab(event, 'GM')" >Gerrymend</button>
      </div>

    <!-- Tab content -->
    <div id="Help" class="tabcontent">
            <div class = "tab_header">Need Help?</div><br></br>
                <h4>Data: The data tab shows the currently selected state's election data.</h4><br></br>
                <h4>Bloc?: The bloc tab determines if any demographics in this state's precincts are voting as a bloc.</h4><br></br>
                <h4>Gerrymend: The Gerrymend tab redraws district lines to maximize the number of Minority-Majority Districts.</h4><br></br>
    </div>
    <div id="Data" class="tabcontent">
            <div class = "tab_header">Data Displayed</div><br>
            <form>
                <div class="custom-control custom-radio custom-control-inline" style=" margin-left: 30px">
                            <input type="radio" class="custom-control-input" id="2016P" name="example" value="customEx" checked = "true">
                            <label class="custom-control-label" for="2016P" style="color: white;">2016 Presidential Election</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline" style=" margin-left: 30px">
                    <input type="radio" class="custom-control-input" id="2016C" name="example" value="customEx">
                    <label class="custom-control-label" for="2016C" style="color: white;">2016 Congressional Election</label>
                </div>
                <div class="custom-control custom-radio custom-control-inline" style=" margin-left: 30px">
                        <input type="radio" class="custom-control-input" id="2018C" name="example" value="customEx">
                        <label class="custom-control-label" for="2018C" style="color: white;">2018 Congressional Election</label>
                </div>
            </form>
            <br>

            <div class = "tab_subheader">State Information</div><br>
            <p>((Here shall be the state info table: Winning Party, Votes for Party, Total Votes, percentage))</p><br><br>
            <p>((potentially links to state guidelines, incumbent info, and statewide patterns))</p>

    </div>
    <div id="Bloc" class="tabcontent">
            <div class = "tab_header">Calculate Voting Blocs</div><br></br>
            <div class = "tab_subheader">Please Input Values Below:<br></br></div>
            <form style="overflow: hidden; ">
                    Population % Threshold:
                    <input type="number" name="popThresh" style = "width: 50px; color: black; float: right;"><br></br>
                    Voting % Threshold: 
                    <input type="number" name="voteThresh"  style = "width: 50px;  color: black; float: right;"><br></br>
            </form>
            <button class = "ctr_button">Calculate</button><br></br>
            <div class = "tab_subheader">Output:</div><br></br>
                    <p>((Displays the output table, or "No Blocs Found"))</p>
    </div>

    <div id="GM" class="tabcontent">
            <div class = "tab_header">Gerrymend</div><br></br>
            <div class = "tab_subheader">Phase 1: Graph Partitioning</div><br></br>
            <div>
                <h4>Please Select an Update Mode:</h4>
                <!--If iterative is selected, then the next button should enable-->
                <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" class="custom-control-input" id="iterate" name="example" value="customEx">
                        <label class="custom-control-label" for="iterate" style="color: white">Iterative</label>
                        <button class = "disabled_r" disabled>Next Iteration</button>
                </div>
                <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" class="custom-control-input" id="endUpdate" name="example" value="customEx">
                        <label class="custom-control-label" for="endUpdate" style="color: white">End Only</label><br></br>
                </div>
                <button class = "ctr_button" disabled>Start</button><br></br>
                <h4>Output: </h4><br></br>
                <button class = "phase2_button" onclick="openTab(event, 'P2')">Phase 2</button><br></br>
            </div>
    </div>
    <div id = "P2" class = "tabcontent" >
        <!--Phase 2 ONLY should appear one Phase 1 COMPLETES.-->
        <div class = "tab_subheader">Phase 2: Simulated Annealing</div><br></br>
        <h4>•Objective Function Weights:</h4>
        <div class = "content_centered">
            <select name="Weights">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
            </select>
        <input type="number" name="popThresh" style = "width: 50px; color: black; ">
        </div>
        <h4>•Minority Populations Considered:.</h4>
        <div>
            <input type="checkbox" name="afr">African American<br>
            <input type="checkbox" name="nat" >Native American<br>
            <input type="checkbox" name="his">Hispanic<br>
            <input type="checkbox" name="asi">Asian<br>
            <input type="checkbox" name="whi">White<br>
        </div>
        <h4>•Population Percentages:</h4>
        <form style="overflow: hidden; text-align: center; ">
                Maximum:
                <input type="number" name="minPercentage" style = "width: 50px; color: black; float: right;"><br></br>
                Minimum: 
                <input type="number" name="maxPercentage"  style = "width: 50px;  color: black; float: right;"><br></br>
        </form>
        <br></br>
        <div class = "tab_subheader">Output:</div><br></br>
        <p>((To Be Done: GM Scores, Population/Maj-Min Tables))</p>
        <button class = "disabled" disabled>Original Districts</button>
        <button class = "disabled" disabled>Generated Districts</button>
   </div>         
</div>   

    <!--Map-->
    <div id="map"></div>

    <div class = "small-info-window" id = "small-info-window">
        <script id="smallInfoTemplate" type="text/x-jquery-tmpl">
            <tr>
                <td width="30%">${Attr}</td>
                <td width="70%">${Amout}</td>
            </tr>
        </script>
        <table class="table" id="small-info-table">
            <thead>
            <tr>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <!--Information Slider-->
    <div class = "slide-info" id="slide-info">
         <h3>Information</h3>
         <!-- -->
            <script id="itemTemplate" type="text/x-jquery-tmpl">
            <tr>
                <td width="30%">${Attr}</td>
                <td width="70%">${Amout}</td>
            </tr>
        </script>
        <!-- -->
            <table class="table" id="itemList">
                <thead>
                <tr>
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
            <input type="button" class="button" onclick="closeInfo()" value="Close">
        </div>
</div>
<script>

    //document.getElementById("firstshow").onclick();
    /*Variables*/
    L.mapbox.accessToken = 'pk.eyJ1IjoidnF1aW50MjMiLCJhIjoiY2sxMTF0azJhMDFyODNncGJhaW1veG51ayJ9.CvreiQri97EaLXDEP5ahcA';
    var mapboxAccessToken = 'pk.eyJ1IjoidnF1aW50MjMiLCJhIjoiY2sxMTF0azJhMDFyODNncGJhaW1veG51ayJ9.CvreiQri97EaLXDEP5ahcA';
    // console.log(map1.get('bar'));
    //
    // console.log(map1.get('baz'));

    //Map
    var map = L.mapbox.map('map')
        .setView([27.8, -83], 6.5)
        .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11'));
    map.zoomControl.setPosition('topleft');
    //map.dragging.disable();

    //Popups
    var popup1;

    //Sliders
    var sliderState = 0;
    var infoStat = "null";

    /*geoJson Manipulation*/
    L.geoJson(floridaOriDis, {
        style: function (feature) {
            return {color:'black', fillColor: district_color.get(feature.properties.DISTRICT), weight:1, opacity: 0.8, fillOpacity: 0.5};
        },
        onEachFeature: onEachFeature,
    }).addTo(map);

    L.geoJson(floridaPre, {
        style: function (feature) {
            return {color:'black', fillColor: district_color.get(feature.properties.DISTRICT), weight:1, opacity: 0.8, fillOpacity: 0.5};
        },
        onEachFeature: onEachFeature,
    }).addTo(map);



</script>
</body>
</html>