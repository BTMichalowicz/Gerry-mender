<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset=utf-8/>
    <title>GM-Florida</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <script src='https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.2.0/mapbox.css' rel='stylesheet'/>
    <script src='./scripts/us-states.js'></script>
    <script src='./scripts/stateData.js'></script>
    <script src='./scripts/FL.js'></script>
    <script src='./scripts/leaflet.ajax.min.js'></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="Content/Site.css">

</head>
<body>


<nav class="navbar navbar-inverse">
    <div class="container-fluid">


        <div class="navbar-header">
            <a class="navbar-brand my-navbar-brand"> GerryMender Florida </a>
        </div>
        <a class="text-white navbar-brand toggle-btn" data-toggle="tooltip" data-placement="bottom"
           title="open/close function menu" onclick="toggleSlider()">Menu <span
                class="glyphicon glyphicon-align-justify"></span></a>
        <a class="text-white navbar-brand" data-toggle="tooltip" data-placement="bottom" title="return back to homepage"
           href="Homepage.html" style = "float: right">Back</a>
    </div>
</nav>


<div id="map-container">

    <div id="slide-menu">Objective Function Controls<br><br>
        <!--Majority Threshold-->
        <input type="checkbox" name="Maj" value="Maj">  Majority Threshold<br>
        <div class="slidecontainer">
            <input type="range" min="1" max="100" value="50" class="slider" id="majThreshold">
        </div><br>

        <!--Minority Threshold-->
        <input type="checkbox" name="Min" value="Min">  Minority Threshold<br>
        <div class="slidecontainer">
            <input type="range" min="1" max="100" value="50" class="slider" id="minThreshold">
        </div><br>

        <!--Algorithm Controls-->
        <div id = "algorithm-controls">Algorithm Controls<br>
            <button type = "button">PLAY
            <button type = "button">PAUSE
            <button type = "button">STOP
            <button type = "button">REPLAY
        </div>
  

    </div>

    <div id="map"></div>
</div>


<script>

    L.mapbox.accessToken = 'pk.eyJ1IjoidnF1aW50MjMiLCJhIjoiY2sxMTF0azJhMDFyODNncGJhaW1veG51ayJ9.CvreiQri97EaLXDEP5ahcA';
    var mapboxAccessToken = 'pk.eyJ1IjoidnF1aW50MjMiLCJhIjoiY2sxMTF0azJhMDFyODNncGJhaW1veG51ayJ9.CvreiQri97EaLXDEP5ahcA';
    var map = L.mapbox.map('map')
        .setView([27.8, -83], 6.5)
        .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11'));

    map.zoomControl.setPosition('topleft');
    //map.dragging.disable();


    var popup1;

    function onEachFeature(feature, layer) {




            layer.on("mouseover", function (e) {

                var popcontent = feature.properties.NAME  +
                    "<br/>population : 12312312" +
                    "<br/>White : 123123" +
                    "<br/>Minority : 123123" +
                    "<br/>Hispanic/Latino : 123123" +
                    "<br/>Asian : 123123";

                lat = e.latlng.lat;
                lng = e.latlng.lng;

                    popup1 = L.popup()
                    .setLatLng([lat, lng])
                    .setContent(popcontent)
                    .openOn(map);


            });


            layer.on("mouseout", function (e) {

                $(popup1.remove());
            });




            layer.bindPopup(feature.properties.NAME  +
                "<br/>population : 12312312" +
                "<br/>White : 123123" +
                "<br/>Minority : 123123" +
                "<br/>Hispanic/Latino : 123123" +
                "<br/>Asian : 123123"

            );


    }

    var marker = L.marker("map");
    marker.bindPopup("Popup content");
    marker.on('mouseover', function (e) {
        this.openPopup();
    });
    marker.on('mouseout', function (e) {
        this.closePopup();
    });


    L.geoJson(floridaLayer, {
        style: function (feature) {

            return {color: '#FF7F50', opacity: 0.7};

        },
        onEachFeature: onEachFeature,
    }).addTo(map);



    // active slider menu
    var sliderState = 0;
    function toggleSlider() {
        if (sliderState === 0) { //Open slider
            document.getElementById("slide-menu").style.width = "350px";
            sliderState = 1;
            setTimeout(moveZoomControl, 0);

        } else {
            document.getElementById("slide-menu").style.width = "0";
            sliderState = 0;
            setTimeout(moveZoomControl, 200);

        }
    }

    function moveZoomControl() {

        if (sliderState === 1) { //Open slider
            container = map.zoomControl.getContainer(),
                containerTop = 350 + 'px';
            container.style.position = 'absolute';
            container.style.left = containerTop;

        } else {
            container = map.zoomControl.getContainer(),
                containerTop = 0 + 'px';
            container.style.position = 'absolute';
            container.style.left = containerTop;
        }
    }

</script>
</body>
</html>